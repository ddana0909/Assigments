@model IEnumerable<TravelAgency.Models.Trip>

@{
    ViewBag.Title = "Index";
}

@section scripts
{
    <script type="text/javascript">

        $(function () {
            $("[data-toggle='tooltip']").tooltip();
        });
        function getTripDetails(tripId) {
            $.ajax({
                url: '@Url.Action("TripDetails")',
                data: { tripId: tripId },
                success: function (data) {
                    $('#m_' + tripId).html(data);
                }
            });
        }


    </script>
}
<h2>Trips</h2>

<p>
    @Html.ActionLink("Add New Trip", "Create")
</p>


@foreach (var item in Model)
{
    <div class="row" id="@item.Id" onclick=" getTripDetails(@item.Id)">
        <div class="col-md-4">
            <br/>
           
            <img src="@Url.Content(item.PicturePath)" alt="Album Picture" />
        </div>
        <div class="col-md-3">
            <div class="row text-center">
                <h2>@Html.DisplayFor(modelItem => item.Name)</h2>
            </div>
            <div class="row text-center">
                <h4>@Html.DisplayFor(modelItem => item.StartDate) -
                    @Html.DisplayFor(modelItem => item.FinishDate)</h4>
            </div>
            <div class="row text-center">
                <span class="badge">Guests</span>
            </div>
            <br />
            <div class="row">
                <div class="col-md-offset-2 col-md-4 text-center">
                    <div class=" row">
                        @Html.DisplayNameFor(model => model.Viable)
                    </div>
                    <div class="row">
                        @if (@item.Viable == true)
                        {
                            <button
                                class="btn-default btn-sm btn-success"
                                data-toggle="tooltip"
                                data-placement="bottom"
                                title=""
                                data-original-title="Minimum number of Guest is ...">
                                <span class="glyphicon glyphicon-ok"></span>
                            </button> 
                                               
                        }

                        @if (@item.Viable == false)
                        {
                            <button
                                class="btn-default btn-sm btn-danger"
                                data-toggle="tooltip"
                                data-placement="bottom"
                                title=""
                                data-original-title="The minimum number of guests is not achieved yet ...">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button> 
                        }

                    </div>
                </div>
                <div class="col-md-4 text-center">
                    <div class="row">
                        @Html.DisplayNameFor(model => model.Complete)
                    </div>
                    <div class="row">
                        @if (@item.Complete == true)
                        {
                            <button
                                class="btn-default btn-sm btn-success"
                                data-toggle="tooltip"
                                data-placement="bottom"
                                title=""
                                data-original-title="Legs are planned for each day in the period">
                                <span class="glyphicon glyphicon-ok"></span>
                            </button> 
                        }
                        @if (@item.Complete == false)
                        {
                            <button
                                class="btn-default btn-sm btn-danger"
                                data-toggle="tooltip"
                                data-placement="bottom"
                                title=""
                                data-original-title="Legs still missing">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                        }
                    </div>
                </div>

            </div>

        </div>
        <div class="col-md-5" id="m_@item.Id"></div>
    </div>
    <br/>
    <br/>
}


