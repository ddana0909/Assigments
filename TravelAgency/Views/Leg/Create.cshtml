@model TravelAgency.Models.Leg

@{
    ViewBag.Title = "Add a Leg";
}
<head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
</head>

@section scripts
{
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

    <script>
        $(function () {
            $('#datepicker').datepicker({ dateFormat: 'dd/mm/yy' });
            $('#datepicker1').datepicker({ dateFormat: 'dd/mm/yy' });

        });

        document.onload = getTimeLine;

        function getTimeLine() {
            var id = $("#TripId").val();
            if (id == "") {
                document.getElementById("timeline").innerHTML = "";
                document.getElementById("title").innerHTML = "";
            } else {
                $.ajax({
                    url: '@Url.Action("GetProgressBar", "Home")',
                    data: { tripId: id },
                    success: function (data) {
                        $("#timeline").html(data);
                        var xText = $("#TripId :selected").text();
                        document.getElementById("title").innerHTML = "";
                        $("<div><h2>" + xText + "</h2></div>").appendTo("#title");
                    }
                });
            }
        }
    </script>
    @Scripts.Render("~/bundles/jqueryval")  
}
<style>
    .spaceIt {
        margin-bottom: 20px;
        margin-left: 70px;
    }

    .spaceTop {
        margin-top: 5%;
    }
</style>

 

<div class="row spaceTop">
                        
    <div id="title"></div>    
    <div id="timeline"></div>
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
        <div class=" col-md-offset-3 col-md-6 well-lg well ">
            @{
        if (@ViewBag.ErrorMessage != null)
        {
            <h4 class="text-danger text-center">@ViewBag.ErrorMessage</h4>
         
        }
            }
            <fieldset>
                <legend>Leg</legend>

                <div class="form-group">  

                    @Html.LabelFor(model => model.Trip.Id)
                    @Html.DropDownList("TripId",
                        new SelectList(ViewBag.TripList, "id", "value", 0), "Select a trip",
                        new { @class = "form-control ", @onchange = "getTimeLine()" })
                    @Html.ValidationMessageFor(model => model.TripId, null, new { @class = "text-danger" })
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.StartLocation)
                    @Html.TextBoxFor(model => model.StartLocation, new { @class = "form-control", placeholder = "Name of the trip" })
                    @Html.ValidationMessageFor(model => model.StartLocation, null, new { @class = "text-danger" })
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.FinishLocation)
                    @Html.TextBoxFor(model => model.FinishLocation, new { @class = "form-control", placeholder = "Name of the trip" })
                    @Html.ValidationMessageFor(model => model.FinishLocation, null, new { @class = "text-danger" })
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.StartDate)
                    @Html.TextBoxFor(model => model.StartDate, new { @class = "form-control", id = "datepicker" })
                    @Html.ValidationMessageFor(model => model.StartDate, null, new { @class = "text-danger" })
                </div>

                <div class="form-group">
                    @Html.LabelFor(model => model.FinishDate)
                    @Html.TextBoxFor(model => model.FinishDate, new { @class = "form-control", id = "datepicker1" })
                    @Html.ValidationMessageFor(model => model.FinishDate, null, new { @class = "text-danger" })
                </div>

                <br />
                <p>
                    <input class=" col-md-12 btn btn-info" type="submit" value="Add New Leg" />
                </p>
            </fieldset>
            
        </div>
  
    }
</div>
   @Html.ActionLink("Back to List", "Index", "Home")    
     



